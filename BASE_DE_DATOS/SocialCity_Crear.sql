-- MySQL Script generated by MySQL Workbench
-- Fri Nov 26 21:41:30 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SocialCity
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema SocialCity
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SocialCity` DEFAULT CHARACTER SET utf8 ;
USE `SocialCity` ;

-- -----------------------------------------------------
-- Table `SocialCity`.`FAVORITOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`FAVORITOS` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Nombre` VARCHAR(50) NOT NULL,
  `Direccion` VARCHAR(50) NOT NULL,
  `Puntuacion` DECIMAL(1,1) NOT NULL,
  `Telefono` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`ALARMA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`ALARMA` (
  `N.Alarma` INT NOT NULL AUTO_INCREMENT,
  `Nombre` VARCHAR(100) NOT NULL,
  `Fecha` VARCHAR(10) NOT NULL,
  `Hora` VARCHAR(5) NOT NULL,
  `Descripción` VARCHAR(1000) NOT NULL,
  PRIMARY KEY (`N.Alarma`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`PERFIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`PERFIL` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Sexo` VARCHAR(6) NULL,
  `Edad` VARCHAR(2) NULL,
  `EstadoCivil` VARCHAR(20) NULL,
  `RamaProfesional` VARCHAR(45) NULL,
  `Intereses` VARCHAR(100) NULL,
  `FAVORITOS_ID` INT NOT NULL,
  `ALARMA_N.Alarma` INT NOT NULL,
  PRIMARY KEY (`ID`, `FAVORITOS_ID`, `ALARMA_N.Alarma`),
  INDEX `fk_PERFIL_FAVORITOS1_idx` (`FAVORITOS_ID` ASC) VISIBLE,
  INDEX `fk_PERFIL_ALARMA1_idx` (`ALARMA_N.Alarma` ASC) VISIBLE,
  CONSTRAINT `fk_PERFIL_FAVORITOS1`
    FOREIGN KEY (`FAVORITOS_ID`)
    REFERENCES `SocialCity`.`FAVORITOS` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PERFIL_ALARMA1`
    FOREIGN KEY (`ALARMA_N.Alarma`)
    REFERENCES `SocialCity`.`ALARMA` (`N.Alarma`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`DIRECCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`DIRECCION` (
  `NombreLocal` VARCHAR(50) NOT NULL,
  `Zona` VARCHAR(20) NOT NULL,
  `Calle` VARCHAR(50) NOT NULL,
  `Ciudad` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`NombreLocal`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`RESTAURANTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`RESTAURANTE` (
  `Nombre` VARCHAR(50) NOT NULL,
  `Capacidad` VARCHAR(30) NOT NULL,
  `Puntuacion` FLOAT(2,1) NOT NULL,
  `Carta` VARCHAR(5000) NULL,
  `Horario` VARCHAR(1000) NOT NULL,
  `CLIENTES_HABITUALES_ID1` INT NOT NULL,
  `DIRECCION_NombreLocal` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`Nombre`, `CLIENTES_HABITUALES_ID1`, `DIRECCION_NombreLocal`),
  INDEX `fk_RESTAURANTE_DIRECCION1_idx` (`DIRECCION_NombreLocal` ASC) VISIBLE,
  CONSTRAINT `fk_RESTAURANTE_DIRECCION1`
    FOREIGN KEY (`DIRECCION_NombreLocal`)
    REFERENCES `SocialCity`.`DIRECCION` (`NombreLocal`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`BAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`BAR` (
  `Nombre` VARCHAR(50) NOT NULL,
  `Capacidad` VARCHAR(30) NOT NULL,
  `Puntuacion` FLOAT(2,1) NOT NULL,
  `Horario` VARCHAR(1000) NOT NULL,
  `CLIENTES_HABITUALES_ID` INT NOT NULL,
  `Eventos` VARCHAR(5000) NULL,
  `JuegosDeMesa` VARCHAR(100) NULL,
  `DIRECCION_NombreLocal` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`Nombre`, `CLIENTES_HABITUALES_ID`, `DIRECCION_NombreLocal`),
  INDEX `fk_BAR_DIRECCION1_idx` (`DIRECCION_NombreLocal` ASC) VISIBLE,
  CONSTRAINT `fk_BAR_DIRECCION1`
    FOREIGN KEY (`DIRECCION_NombreLocal`)
    REFERENCES `SocialCity`.`DIRECCION` (`NombreLocal`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`ME_GUSTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`ME_GUSTA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Alias_USUARIO` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`COMENTARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`COMENTARIO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Descripcion` VARCHAR(1000) NOT NULL,
  `RESTAURANTE_Nombre` VARCHAR(50) NOT NULL,
  `BAR_Nombre` VARCHAR(50) NOT NULL,
  `ME_GUSTA_ID` INT NOT NULL,
  PRIMARY KEY (`ID`, `RESTAURANTE_Nombre`, `BAR_Nombre`, `ME_GUSTA_ID`),
  INDEX `fk_COMENTARIO_RESTAURANTE1_idx` (`RESTAURANTE_Nombre` ASC) VISIBLE,
  INDEX `fk_COMENTARIO_BAR1_idx` (`BAR_Nombre` ASC) VISIBLE,
  INDEX `fk_COMENTARIO_ME_GUSTA1_idx` (`ME_GUSTA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_COMENTARIO_RESTAURANTE1`
    FOREIGN KEY (`RESTAURANTE_Nombre`)
    REFERENCES `SocialCity`.`RESTAURANTE` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMENTARIO_BAR1`
    FOREIGN KEY (`BAR_Nombre`)
    REFERENCES `SocialCity`.`BAR` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMENTARIO_ME_GUSTA1`
    FOREIGN KEY (`ME_GUSTA_ID`)
    REFERENCES `SocialCity`.`ME_GUSTA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`USUARIO` (
  `Alias` VARCHAR(50) NOT NULL,
  `Nombre` VARCHAR(30) NOT NULL,
  `Apellidos` VARCHAR(30) NOT NULL,
  `Clave` VARCHAR(30) NOT NULL,
  `PERFIL_ID` INT NOT NULL,
  `RESTAURANTE_Nombre` VARCHAR(50) NOT NULL,
  `COMENTARIO_ID` INT NOT NULL,
  `COMENTARIO_RESTAURANTE_Nombre` VARCHAR(50) NOT NULL,
  `COMENTARIO_BAR_Nombre` VARCHAR(50) NOT NULL,
  `COMENTARIO_ME_GUSTA_ID` INT NOT NULL,
  PRIMARY KEY (`Alias`, `PERFIL_ID`, `RESTAURANTE_Nombre`, `COMENTARIO_ID`, `COMENTARIO_RESTAURANTE_Nombre`, `COMENTARIO_BAR_Nombre`, `COMENTARIO_ME_GUSTA_ID`),
  INDEX `fk_USUARIO_PERFIL_idx` (`PERFIL_ID` ASC) VISIBLE,
  INDEX `fk_USUARIO_RESTAURANTE1_idx` (`RESTAURANTE_Nombre` ASC) VISIBLE,
  INDEX `fk_USUARIO_COMENTARIO1_idx` (`COMENTARIO_ID` ASC, `COMENTARIO_RESTAURANTE_Nombre` ASC, `COMENTARIO_BAR_Nombre` ASC, `COMENTARIO_ME_GUSTA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_USUARIO_PERFIL`
    FOREIGN KEY (`PERFIL_ID`)
    REFERENCES `SocialCity`.`PERFIL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USUARIO_RESTAURANTE1`
    FOREIGN KEY (`RESTAURANTE_Nombre`)
    REFERENCES `SocialCity`.`RESTAURANTE` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USUARIO_COMENTARIO1`
    FOREIGN KEY (`COMENTARIO_ID` , `COMENTARIO_RESTAURANTE_Nombre` , `COMENTARIO_BAR_Nombre` , `COMENTARIO_ME_GUSTA_ID`)
    REFERENCES `SocialCity`.`COMENTARIO` (`ID` , `RESTAURANTE_Nombre` , `BAR_Nombre` , `ME_GUSTA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`CLIENTES_HABITUALES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`CLIENTES_HABITUALES` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Nombre` VARCHAR(30) NOT NULL,
  `HoraAproximada` VARCHAR(5) NOT NULL,
  `Edad` VARCHAR(2) NOT NULL,
  `NombreLocal` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`HISTORIAL_OCUPACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`HISTORIAL_OCUPACION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Lunes` VARCHAR(50) NOT NULL,
  `Martes` VARCHAR(50) NOT NULL,
  `Miércoles` VARCHAR(50) NOT NULL,
  `Jueves` VARCHAR(50) NOT NULL,
  `Viernes` VARCHAR(50) NOT NULL,
  `Sábado` VARCHAR(50) NOT NULL,
  `Domingo` VARCHAR(50) NOT NULL,
  `NombreLocal` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`RESTAURANTE_tiene_HISTORIAL_OCUPACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`RESTAURANTE_tiene_HISTORIAL_OCUPACION` (
  `RESTAURANTE_Nombre` VARCHAR(50) NOT NULL,
  `RESTAURANTE_CLIENTES_HABITUALES_ID1` INT NOT NULL,
  `RESTAURANTE_DIRECCION_ID` INT NOT NULL,
  `HISTORIAL_OCUPACION_ID` INT NOT NULL,
  PRIMARY KEY (`RESTAURANTE_Nombre`, `RESTAURANTE_CLIENTES_HABITUALES_ID1`, `RESTAURANTE_DIRECCION_ID`, `HISTORIAL_OCUPACION_ID`),
  INDEX `fk_RESTAURANTE_has_HISTORIAL_OCUPACION_HISTORIAL_OCUPACION1_idx` (`HISTORIAL_OCUPACION_ID` ASC) VISIBLE,
  INDEX `fk_RESTAURANTE_has_HISTORIAL_OCUPACION_RESTAURANTE1_idx` (`RESTAURANTE_Nombre` ASC, `RESTAURANTE_CLIENTES_HABITUALES_ID1` ASC, `RESTAURANTE_DIRECCION_ID` ASC) VISIBLE,
  CONSTRAINT `fk_RESTAURANTE_has_HISTORIAL_OCUPACION_RESTAURANTE1`
    FOREIGN KEY (`RESTAURANTE_Nombre` , `RESTAURANTE_CLIENTES_HABITUALES_ID1`)
    REFERENCES `SocialCity`.`RESTAURANTE` (`Nombre` , `CLIENTES_HABITUALES_ID1`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RESTAURANTE_has_HISTORIAL_OCUPACION_HISTORIAL_OCUPACION1`
    FOREIGN KEY (`HISTORIAL_OCUPACION_ID`)
    REFERENCES `SocialCity`.`HISTORIAL_OCUPACION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`BAR_tiene_HISTORIAL_OCUPACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`BAR_tiene_HISTORIAL_OCUPACION` (
  `BAR_Nombre` VARCHAR(50) NOT NULL,
  `BAR_DIRECCION_ID` INT NOT NULL,
  `BAR_CLIENTES_HABITUALES_ID` INT NOT NULL,
  `HISTORIAL_OCUPACION_ID` INT NOT NULL,
  PRIMARY KEY (`BAR_Nombre`, `BAR_DIRECCION_ID`, `BAR_CLIENTES_HABITUALES_ID`, `HISTORIAL_OCUPACION_ID`),
  INDEX `fk_BAR_has_HISTORIAL_OCUPACION_HISTORIAL_OCUPACION1_idx` (`HISTORIAL_OCUPACION_ID` ASC) VISIBLE,
  INDEX `fk_BAR_has_HISTORIAL_OCUPACION_BAR1_idx` (`BAR_Nombre` ASC, `BAR_DIRECCION_ID` ASC, `BAR_CLIENTES_HABITUALES_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BAR_has_HISTORIAL_OCUPACION_BAR1`
    FOREIGN KEY (`BAR_Nombre` , `BAR_CLIENTES_HABITUALES_ID`)
    REFERENCES `SocialCity`.`BAR` (`Nombre` , `CLIENTES_HABITUALES_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BAR_has_HISTORIAL_OCUPACION_HISTORIAL_OCUPACION1`
    FOREIGN KEY (`HISTORIAL_OCUPACION_ID`)
    REFERENCES `SocialCity`.`HISTORIAL_OCUPACION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`RESTAURANTE_tiene_CLIENTES_HABITUALES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`RESTAURANTE_tiene_CLIENTES_HABITUALES` (
  `RESTAURANTE_Nombre` VARCHAR(50) NOT NULL,
  `RESTAURANTE_CLIENTES_HABITUALES_ID1` INT NOT NULL,
  `RESTAURANTE_DIRECCION_ID` INT NOT NULL,
  `CLIENTES_HABITUALES_ID` INT NOT NULL,
  PRIMARY KEY (`RESTAURANTE_Nombre`, `RESTAURANTE_CLIENTES_HABITUALES_ID1`, `RESTAURANTE_DIRECCION_ID`, `CLIENTES_HABITUALES_ID`),
  INDEX `fk_RESTAURANTE_has_CLIENTES_HABITUALES_CLIENTES_HABITUALES1_idx` (`CLIENTES_HABITUALES_ID` ASC) VISIBLE,
  INDEX `fk_RESTAURANTE_has_CLIENTES_HABITUALES_RESTAURANTE1_idx` (`RESTAURANTE_Nombre` ASC, `RESTAURANTE_CLIENTES_HABITUALES_ID1` ASC, `RESTAURANTE_DIRECCION_ID` ASC) VISIBLE,
  CONSTRAINT `fk_RESTAURANTE_has_CLIENTES_HABITUALES_RESTAURANTE1`
    FOREIGN KEY (`RESTAURANTE_Nombre` , `RESTAURANTE_CLIENTES_HABITUALES_ID1`)
    REFERENCES `SocialCity`.`RESTAURANTE` (`Nombre` , `CLIENTES_HABITUALES_ID1`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RESTAURANTE_has_CLIENTES_HABITUALES_CLIENTES_HABITUALES1`
    FOREIGN KEY (`CLIENTES_HABITUALES_ID`)
    REFERENCES `SocialCity`.`CLIENTES_HABITUALES` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SocialCity`.`BAR_tiene_CLIENTES_HABITUALES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SocialCity`.`BAR_tiene_CLIENTES_HABITUALES` (
  `BAR_Nombre` VARCHAR(50) NOT NULL,
  `BAR_DIRECCION_ID` INT NOT NULL,
  `BAR_CLIENTES_HABITUALES_ID` INT NOT NULL,
  `CLIENTES_HABITUALES_ID` INT NOT NULL,
  PRIMARY KEY (`BAR_Nombre`, `BAR_DIRECCION_ID`, `BAR_CLIENTES_HABITUALES_ID`, `CLIENTES_HABITUALES_ID`),
  INDEX `fk_BAR_has_CLIENTES_HABITUALES_CLIENTES_HABITUALES1_idx` (`CLIENTES_HABITUALES_ID` ASC) VISIBLE,
  INDEX `fk_BAR_has_CLIENTES_HABITUALES_BAR1_idx` (`BAR_Nombre` ASC, `BAR_DIRECCION_ID` ASC, `BAR_CLIENTES_HABITUALES_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BAR_has_CLIENTES_HABITUALES_BAR1`
    FOREIGN KEY (`BAR_Nombre` , `BAR_CLIENTES_HABITUALES_ID`)
    REFERENCES `SocialCity`.`BAR` (`Nombre` , `CLIENTES_HABITUALES_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BAR_has_CLIENTES_HABITUALES_CLIENTES_HABITUALES1`
    FOREIGN KEY (`CLIENTES_HABITUALES_ID`)
    REFERENCES `SocialCity`.`CLIENTES_HABITUALES` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
